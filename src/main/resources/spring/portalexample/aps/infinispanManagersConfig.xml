<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
		xmlns:context="http://www.springframework.org/schema/context"
		xmlns:jee="http://www.springframework.org/schema/jee"
		xmlns:util="http://www.springframework.org/schema/util"
		xmlns:cache="http://www.springframework.org/schema/cache"
        xmlns:p="http://www.springframework.org/schema/p" 
		xmlns:aop="http://www.springframework.org/schema/aop" 
		xmlns:task="http://www.springframework.org/schema/task"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
			http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
			http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-4.0.xsd
			http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd 
			http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache-4.0.xsd 
			http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
			http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-4.0.xsd">
	
	<cache:annotation-driven cache-manager="springCacheManager" />
	<aop:aspectj-autoproxy proxy-target-class="true" />
	
	<!-- <jee:jndi-lookup id="nativeCacheManager" jndi-name="java:jboss/infinispan/container/entando"/> -->
        
    <jee:jndi-lookup id="categoryCache" jndi-name="java:jboss/infinispan/cache/entando/Entando_CategoryManager" />
    <jee:jndi-lookup id="languageCache" jndi-name="java:jboss/infinispan/cache/entando/Entando_LangManager" />
    
    <bean id="springCacheManager" class="org.springframework.cache.support.SimpleCacheManager">
		<property name="caches">
			<set>
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_Cache" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_PageManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_PageModelManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_WidgetTypeManager" />
				<bean class="org.infinispan.spring.provider.SpringCache">
					<constructor-arg ref="categoryCache" />
				</bean>
				<!-- <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_CategoryManager" /> -->
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_ConfigManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_RoleManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_GroupManager" />
				<!-- <bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_LangManager" /> -->
				<bean class="org.infinispan.spring.provider.SpringCache">
					<constructor-arg ref="languageCache" />
				</bean>
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_CacheInfoManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_I18nManager" />	
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_UserProfileManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_DataObjectManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean" 
					p:name="Entando_jacmsContentManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_InitializerManager" />			
		       	<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_ApiCatalogManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_DataObjectModelManager" />			
		       	<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_ContentModelManager" />
				<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_KeyGeneratorManager" />
       			<bean class="org.springframework.cache.concurrent.ConcurrentMapCacheFactoryBean"
					p:name="Entando_ResourceManager" />
			</set>
		</property>
	</bean>
	
	<!-- SPRING OBJECT -->
	<!-- <bean id="springCacheManager" class="org.infinispan.spring.provider.SpringEmbeddedCacheManager">
         <constructor-arg>
            <ref bean="nativeCacheManager"/>
         </constructor-arg>
	</bean> -->
	
	<!-- <bean id="CategoryManager" class="com.agiletec.aps.system.services.category.CategoryManager"
			parent="abstractService" depends-on="BaseConfigManager" >
		<property name="langManager" ref="LangManager"/>
		<property name="categoryDAO" >
			<bean class="com.agiletec.aps.system.services.category.CategoryDAO">
				<property name="dataSource" ref="portDataSource" />
			</bean>
		</property>
		<property name="cacheWrapper">
			<bean class="com.agiletec.aps.system.services.category.cache.CategoryManagerCacheWrapperExperiment2">
				 <property name="customCache" ref="categoryCache" />
			</bean>
		</property>
	</bean> -->
	
</beans>
